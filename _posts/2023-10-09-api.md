---
layout: post
title: Python Day33
subtitle: Application Programming Interfaces
cover-img: /assets/img/20231009_33_6.png
thumbnail-img: /assets/img/20231009_33_6.png
share-img: /assets/img/20231009_33_6.png
tags: [Day33, API, ì—”ë“œí¬ì¸íŠ¸, ì‘ë‹µì½”ë“œ, ISS, ê²½ë„, ìœ„ë„, requests, HTTP Status Codes, ì¹¸ì˜ˆ ëª…ì–¸ ì•±]
---

<br><br>
      
# APIì—”ë“œí¬ì¸íŠ¸ & APIë§¤ê°œë³€ìˆ˜ - ISSë¨¸ë¦¬ ìœ„ ì•Œë¦¬ë¯¸  
  
### ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡œê·¸ë˜ë° ì¸í„°í˜ì´ìŠ¤(API)ë€?  
  
- ì¼ë ¨ì˜ ëª…ë ¹, í•¨ìˆ˜, í”„ë¡œí† ì½œ, ê°ì²´ë¡œ êµ¬ì„±  
- í”„ë¡œê·¸ë˜ë¨¸ëŠ” APIë¥¼ ì´ìš©í•´ì„œ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ìƒì„±í•˜ê±°ë‚˜ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ìƒí˜¸ì‘ìš©í•  ìˆ˜ ìˆìŒ  
- í”„ë¡œê·¸ë¨ê³¼ ì™¸ë¶€ ì‹œìŠ¤í…œ ì‚¬ì´ì— ìˆëŠ” ì¼ì¢…ì˜ ì¥ë²½  
- ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ìƒí˜¸ì‘ìš©í•˜ê¸° ìœ„í•´ ìš°ë¦¬ê°€ í•  ìˆ˜ ìˆëŠ” ëª¨ë“  ê²ƒ
ex)  
ì‹ë‹¹ : ì›¹ì‚¬ì´íŠ¸  
ì£¼ë°© : ë°ì´í„°  
ë©”ë‰´ : API  

<br><br>
  
### APIì—”ë“œí¬ì¸íŠ¸ì™€ APIí˜¸ì¶œí•˜ê¸°  
  
**APIì—”ë“œí¬ì¸íŠ¸**  
- ì–´ë–¤ ìœ„ì¹˜ë¼ê³  ìƒê°í•  ìˆ˜ ìˆìŒ  
- íŠ¹ì •í•œ ì™¸ë¶€ ì„œë¹„ìŠ¤ì—ì„œ ë°ì´í„°ë¥¼ ì–»ìœ¼ë ¤ë©´ ì €ì¥ëœ ìœ„ì¹˜ë¥¼ ì•Œê³  ìˆì–´ì•¼ í•¨  
- ë³´í†µì€ ê·¸ëƒ¥ URL  
  
<br><br>
  
### ISS API ê°€ì ¸ì˜¤ê¸°  
  
**JSON Viewer Awesomeì„¤ì¹˜**  
  
![1](/assets/img/20231009_33_1.png)  
  
<br>
  
- ì„¤ì¹˜ í›„ íŠ¸ë¦¬ êµ¬ì¡°ë¡œ í‘œì‹œ
   
![2](/assets/img/20231009_33_2.png)  
  
<br>
  
- JSON í˜•íƒœê°€ ê°€ë³ê³  ë¹ ë¥´ê²Œ ë°ì´í„°ë¥¼ ë‹¤ë£° ìˆ˜ ìˆìŒ  
  
1ï¸âƒ£ install after import requests   
  
2ï¸âƒ£ getë©”ì†Œë“œë¥¼ ì´ìš©í•´ URLì„ argumentì— ë„£ì–´ì£¼ê³  responseì— ì €ì¥  
  
![3](/assets/img/20231009_33_3.png)  
  
<br><br>
  
### ì‘ë‹µ ë‹¤ë£¨ê¸° : HTTP ì½”ë“œ, ì˜ˆì™¸, JSONë°ì´í„°  
  
**ìš°ë¦¬ê°€ APIë¡œë¶€í„° ë°›ì„ ìˆ˜ ìˆëŠ” ì‘ë‹µì½”ë“œ**  
- 404 : ìš°ë¦¬ê°€ ì°¾ëŠ” ê²ƒì´ ì¡´ì¬í•˜ì§€ ì•ŠìŒ  
- 1XX : ë­”ê°€ ì§„í–‰ë˜ê³  ìˆê³  ì•„ì§ ìµœì¢…ì´ ì•„ë‹ˆë¼ëŠ” ì˜ë¯¸  
- 2XX : ëª¨ë“  ê²Œ ì˜ ë˜ì—ˆê³  ê¸°ëŒ€í•œ ë°ì´í„°ë¥¼ ë°›ì„ ê²ƒì´ë¼ëŠ” ì˜ë¯¸  
- 3XX : ê¶Œí•œì´ ì—†ë‹¤ëŠ” ëœ»  
- 4XX : ìš°ë¦¬ê°€ ë­”ê°€ ì˜ëª»ëìŒ  
- 5XX : ìš”ì²­ì„ í•œ ì„œë²„ê°€ ì˜ëª»ë˜ì—ˆë‹¤ëŠ” ì˜ë¯¸(ì„œë²„ê°€ ë‹¤ìš´ë˜ì—ˆê±°ë‚˜ ë‹¤ë¥¸ ì´ìŠˆê°€ ìˆì„ ìˆ˜ ìˆìŒ)  
  
[HTTP Status Codes Glossary](https://www.webfx.com/web-development/glossary/http-status-codes/)  
  
<br>
  
**ì˜ˆì™¸ì²˜ë¦¬í•˜ê¸°**  
  
ëª¨ë“  ìƒíƒœ ì½”ë“œ í•˜ë‚˜í•˜ë‚˜ì— ëŒ€í•´ ì˜ˆì™¸ë¥¼ ìƒì„±í•˜ëŠ” ëŒ€ì‹  ê°„ë‹¨íˆ requestsëª¨ë“ˆì„ ì‚¬ìš©í•´ì„œ ì²˜ë¦¬  
  
![4](/assets/img/20231009_33_4.png)  
  
<br>
  
**JSONë°ì´í„° ë°›ê¸°**  
  
![5](/assets/img/20231009_33_5.png)  
  
[ğŸŒê²½ë„,ìœ„ë„ ì§€ë„](https://www.latlong.net/Show-Latitude-Longitude.html)  
  
<br><br>
  
### Kanye Rest APIë¡œ ì¹¸ì˜ˆ ëª…ì–¸ ì•± í•¨ìˆ˜ìƒì„±  
  
1ï¸âƒ£ import requests  
  
2ï¸âƒ£ requests.get()ë©”ì†Œë“œë¡œ APIìš”ì²­  
  
3ï¸âƒ£ response.raise_for_status()ë¡œ ì˜ˆì™¸ì²˜ë¦¬  
  
4ï¸âƒ£ JSONë°ì´í„° ì €ì¥  
  
5ï¸âƒ£ quote í‚¤ ê°’ ê°€ì ¸ì™€ì„œ ì ìš©  
  
![6](/assets/img/20231009_33_6.png)  
  
<br><br>
  
### API ë§¤ê°œë³€ìˆ˜ ì´í•´í•˜ê¸°: ì¼ëª° ì‹œê°ê³¼ í˜„ì¬ ì‹œê° ë§¤ì¹­í•˜ê¸°  
  
- API ë§¤ê°œë³€ìˆ˜
   
![7](/assets/img/20231009_33_7.png)  
  
![8](/assets/img/20231009_33_8.png)  
  
![9](/assets/img/20231009_33_9.png)  
  
<br><br>  
  
### ISS ë¨¸ë¦¬ ìœ„ ì•Œë¦¬ë¯¸ í”„ë¡œì íŠ¸  
  
1ï¸âƒ£ ISS ìœ„ì¹˜ì™€ ìš°ë¦¬ ìœ„ì¹˜ë¥¼ ë¹„êµ  
- í•¨ìˆ˜ ìƒì„±  
    
2ï¸âƒ£ í˜„ì¬ ì‹œê°„ì´ ë°¤ ì‹œê°„ì¸ì§€ í™•ì¸  
  
- í•¨ìˆ˜ ìƒì„±
   
![10](/assets/img/20231009_33_10.png)  

  

3ï¸âƒ£ ë‘ í•¨ìˆ˜ ë°˜í™˜ê°’ì´ ëª¨ë‘ Trueë©´ ì´ë©”ì¼ ë³´ë‚´ê¸°  
  
4ï¸âƒ£ while	ë°˜ë³µë¬¸ìœ¼ë¡œ ISSê°€ ë¨¸ë¦¬ ìœ„ì— ìˆê³  ë°¤ì¸ì§€ ê³„ì† í™•ì¸  
  
- timeëª¨ë“ˆì„ ì´ìš©í•´ ì†ë„ë¥¼ ëŠ¦ì¶œ ìˆ˜ ìˆìŒ
   
![11](/assets/img/20231009_33_11.png)  
  
<br><br>
  
### Final Code  
  
```javascript
import requests
from datetime import datetime
import smtplib
import time

MY_EMAIL = "dahna0915@gmail.com"
MY_PASSWORD = "****************"

MY_LAT = 33.837805 # Your latitude
MY_LONG = -602.426264 # Your longitude

def is_iss_overhead():
    response = requests.get(url="http://api.open-notify.org/iss-now.json")
    response.raise_for_status()
    data = response.json()

    iss_latitude = float(data["iss_position"]["latitude"])
    iss_longitude = float(data["iss_position"]["longitude"])

    #Your position is within +5 or -5 degrees of the ISS position.
    if MY_LAT-5 <= iss_longitude <= MY_LAT+5 and MY_LONG-5 <= iss_longitude <= MY_LONG+5:
        return True


def is_night():
    parameters = {
        "lat": MY_LAT,
        "lng": MY_LONG,
        "formatted": 0,
    }
    response = requests.get("https://api.sunrise-sunset.org/json", params=parameters)
    response.raise_for_status()
    data = response.json()
    sunrise = int(data["results"]["sunrise"].split("T")[1].split(":")[0])
    sunset = int(data["results"]["sunset"].split("T")[1].split(":")[0])

    time_now = datetime.now().hour

    if time_now >= sunset or time_now <= sunrise:
        return True


while True:
    time.sleep(60)
    if is_iss_overhead() and is_night():
        connection = smtplib.SMTP("smtp.gmail.com")
        connection.starttls()
        connection.login(MY_EMAIL, MY_PASSWORD)
        connection.sendmail(
            from_addr=MY_EMAIL,
            to_addrs=MY_EMAIL,
            msg="Subject:Look Up\n\nThe ISS is avobe you in the sky."
        )
```

  
  
