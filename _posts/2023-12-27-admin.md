---
layout: post
title: Python Day69
subtitle: Adding users and administrator to blog project
cover-img: /assets/img/20231215_69_12.png
thumbnail-img: /assets/img/20231215_69_12.png
share-img: /assets/img/20231215_69_12.png
tags: [Day69, web, Flask, wtform, ckeditor, SQLAlchemy, signup, login, password_hash, LocalProxyê°ì²´ ì—ëŸ¬, ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤, ì™¸ë˜í‚¤, ForegnKey, relationship()]
---
       
<br><br>
   
# Adding users and administrator to blog project  

<br>
  
## ì‹ ê·œ ì‚¬ìš©ì ë“±ë¡  

<br>
  
- /register ê²½ë¡œë¡œ ì´ë™í•´ì„œ ë¸”ë¡œê·¸ ì›¹ ì‚¬ì´íŠ¸ì— ë“±ë¡í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.  
  
![2](/assets/img/20231215_69_2.png) 

<br>
  
- forms.pyì— RegisterFormì´ë¼ëŠ” WTFormì„ ë§Œë“¤ê³  ë¶€íŠ¸ìŠ¤íŠ¸ë©ì„ ì‚¬ìš©í•´ wtf quick_formì„ ë Œë”ë§ í•´ì•¼ í•¨  
  
![1](/assets/img/20231215_69_1.png)  

<br>
  
- ì‚¬ìš©ìê°€ ì…ë ¥í•œ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ Userí…Œì´ë¸”ì˜ blog.dbì— ìƒˆ í•­ëª©ì´ ë§Œë“¤ì–´ì ¸ì•¼ í•¨  
  
![3](/assets/img/20231215_69_3.png)  

<br><br>
 
## ë“±ë¡ëœ ì‚¬ìš©ì ë¡œê·¸ì¸  

<br>
  
- ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ì´ ì™„ë£Œëœ ì‚¬ìš©ìëŠ” login ê²½ë¡œë¡œ ì´ë™í•˜ì—¬ ìì‹ ì˜ í¬ë¦¬ë´ì…œì„ ì‚¬ìš©í•˜ì—¬ ë¡œê·¸ì¸í•  ìˆ˜ ìˆì–´ì•¼ í•¨
  
![4](/assets/img/20231215_69_4.png)  

<br>

![5](/assets/img/20231215_69_5.png)  

<br>
  
- ì‚¬ìš©ì ë“±ë¡ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œëœ ê²½ìš° ë¡œê·¸ì¸ ìƒíƒœë¡œ ë©”ì¸í˜ì´ì§€ ì—°ê²°  
- ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë©”ì¼ë¡œ ë“±ë¡ì‹œ í”Œë˜ì‹œ ë©”ì‹œì§€  

<br>

**html ê³µí†µ flash message code**  

<br>

```javascript
{% raw %}
{% with messages = get_flashed_messages() %}
{% if messages %}
{% for message in messages %}
<p>{{ message }}</p>
{% endfor %}
{% endif %}
{% endwith %}
{% endraw %}

```

<br>

![6](/assets/img/20231215_69_6.png)  

<br>
  
- ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë©”ì¼ì´ê±°ë‚˜ ë¹„ë²ˆì´ í‹€ë ¸ì„ ê²½ìš°
   
![7](/assets/img/20231215_69_7.png)  

<br>
  
- ë¡œê·¸ì¸ ì—¬ë¶€ì— ë”°ë¼ ë„¤ë¹„ê²Œì´ì…˜ ë°” í‘œì‹œ ë³€ê²½
   
![9](/assets/img/20231215_69_9.png)  

<br>

![8](/assets/img/20231215_69_8.png)  

<br><br>

## ê²½ë¡œë³´í˜¸  
  
â‡¨ ê´€ë¦¬ìë§Œ 'ìƒˆ ê²Œì‹œë¬¼ ìƒì„±', 'ìˆ˜ì •', 'ì‚­ì œ' ë²„íŠ¼ì´ ë³´ì´ê²Œ  
  
â‡¨ ì‚¬ìš©ìê°€ ì§ì ‘ ë¼ìš°íŠ¸ë¥¼ ì¨ì„œ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ì—†ê²Œ ë³´í˜¸  

<br>

- admin-only decoretor ìƒì„±
   
![12](/assets/img/20231215_69_12.png)  

<br>
  
- add_new_post, edit_post, delete_postì— ë°ì½”ë ˆì´í„° ë¶™ì—¬ì£¼ê¸°

<br><br>   

ğŸ› ï¸ **Fix error**  
  
![10](/assets/img/20231215_69_10.png)  

<br>
  
- ì›ì¸ì€ add_new_post ë° edit_post í•¨ìˆ˜ì—ì„œ BlogPost ê°ì²´ë¥¼ ìƒì„±í•˜ê±°ë‚˜ ìˆ˜ì •í•  ë•Œ, author í•„ë“œì— current_user ê°ì²´ê°€ ì§ì ‘ í• ë‹¹ë˜ì—ˆê¸° ë•Œë¬¸.   
author í•„ë“œëŠ” ë¬¸ìì—´ íƒ€ì…ìœ¼ë¡œ ì •ì˜ë˜ì–´ ìˆì§€ë§Œ, current_userëŠ” Flask-Loginì˜ ì‚¬ìš©ì ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë‚˜íƒ€ë‚´ëŠ” LocalProxy ê°ì²´ì´ë‹¤.   
ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ author í•„ë“œì—ëŠ” current_userì˜ íŠ¹ì • ì†ì„± (ì˜ˆ: ì‚¬ìš©ì ì´ë¦„)ì„ í• ë‹¹í•´ì•¼ í•¨  

<br>

![11](/assets/img/20231215_69_11.png)  

<br><br>

## ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ ë§Œë“¤ê¸°  
  
â‡¨ `User`í…Œì´ë¸”ê³¼ `BlogPost`í…Œì´ë¸” ê°„ì˜ ê´€ê³„ë¥¼ ìƒì„±í•˜ê³  ì—°ê²°  
  
â‡¨ SQLite, MySQL í˜¹ì€ Postgresqlë“±ì˜ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì—ì„œëŠ”`ForeignKey`ë©”ì„œë“œì™€ `relationalship()`ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ í…Œì´ë¸”ê°„ ê´€ê³„ë¥¼ ì •ì˜í•  ìˆ˜ ìˆë‹¤.  

<br>  

- ë°ì´í„°ë² ì´ìŠ¤ì— ìƒˆë¡œìš´ ì»¬ëŸ¼ì´ ì¶”ê°€ë˜ë¯€ë¡œ ê¸°ì¡´ db ì™„ì „ ì‚­ì œí•˜ê³  ì¬ìƒì„±  
- `ForeignKey`ë©”ì„œë“œì™€ `relationalship()`ë©”ì„œë“œë¥¼ ì‚¬ìš©
   
 ![13](/assets/img/20231215_69_13.png)

 <br><br>

## ëª¨ë“  ì‚¬ìš©ìê°€ ë¸”ë¡œê·¸ ê²Œì‹œë¬¼ì— ëŒ“ê¸€ì„ ì¶”ê°€í•  ìˆ˜ ìˆë„ë¡ í•˜ê¸°  

<br>

![14](/assets/img/20231215_69_14.png)  

<br>

![15](/assets/img/20231215_69_15.png)  

<br>

![16](/assets/img/20231215_69_16.png)  

<br><br>

- ê²Œì‹œë¬¼ì— ëŒ“ê¸€ì„ ì‘ì„±í•  ìˆ˜ ìˆëŠ” ìƒˆë¡œìš´ í…Œì´ë¸” ìƒì„±  
- ë¶€ëª¨ì— í•´ë‹¹í•˜ëŠ” í…Œì´ë¸”ë“¤ê³¼ `Comment`í…Œì´ë¸”ê°„ì— ì¼ëŒ€ë‹¤ ê´€ê³„ë¥¼ ì„¤ì •
   
![17](/assets/img/20231215_69_17.png)  

<br>
  
- /post/<int:post_id> ë¼ìš°íŠ¸ ì—…ë°ì´íŠ¸
    
![18](/assets/img/20231215_69_18.png)  

<br>

- ëª¨ë“  ëŒ“ê¸€ ì¶œë ¥
   
![20](/assets/img/20231215_69_20.png)  

<br>

![19](/assets/img/20231215_69_19.png)  

<br><br>

**file name : day-69-blog-with-users-start**

<br><br>




